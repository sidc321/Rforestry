<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Training data check — training_data_checker • Rforestry</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Training data check — training_data_checker"><meta property="og:description" content="Check the input to forestry constructor"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Rforestry</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.9.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/forestry-labs/Rforestry/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Training data check</h1>
    <small class="dont-index">Source: <a href="https://github.com/forestry-labs/Rforestry/blob/HEAD/R/forestry.R" class="external-link"><code>R/forestry.R</code></a></small>
    <div class="hidden name"><code>training_data_checker-forestry.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Check the input to forestry constructor</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">training_data_checker</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">y</span>,</span>
<span>  <span class="va">ntree</span>,</span>
<span>  <span class="va">replace</span>,</span>
<span>  <span class="va">sampsize</span>,</span>
<span>  <span class="va">mtry</span>,</span>
<span>  <span class="va">nodesizeSpl</span>,</span>
<span>  <span class="va">nodesizeAvg</span>,</span>
<span>  <span class="va">nodesizeStrictSpl</span>,</span>
<span>  <span class="va">nodesizeStrictAvg</span>,</span>
<span>  <span class="va">minSplitGain</span>,</span>
<span>  <span class="va">maxDepth</span>,</span>
<span>  <span class="va">interactionDepth</span>,</span>
<span>  <span class="va">splitratio</span>,</span>
<span>  <span class="va">OOBhonest</span>,</span>
<span>  <span class="va">nthread</span>,</span>
<span>  <span class="va">middleSplit</span>,</span>
<span>  <span class="va">doubleTree</span>,</span>
<span>  <span class="va">linFeats</span>,</span>
<span>  <span class="va">monotonicConstraints</span>,</span>
<span>  <span class="va">groups</span>,</span>
<span>  <span class="va">featureWeights</span>,</span>
<span>  <span class="va">deepFeatureWeights</span>,</span>
<span>  <span class="va">observationWeights</span>,</span>
<span>  <span class="va">linear</span>,</span>
<span>  <span class="va">scale</span>,</span>
<span>  <span class="va">hasNas</span>,</span>
<span>  <span class="va">naDirection</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>A data frame of all training predictors.</p></dd>


<dt>y</dt>
<dd><p>A vector of all training responses.</p></dd>


<dt>ntree</dt>
<dd><p>The number of trees to grow in the forest. The default value is
500.</p></dd>


<dt>replace</dt>
<dd><p>An indicator of whether sampling of training data is with
replacement. The default value is TRUE.</p></dd>


<dt>sampsize</dt>
<dd><p>The size of total samples to draw for the training data. If
sampling with replacement, the default value is the length of the training
data. If sampling without replacement, the default value is two-thirds of
the length of the training data.</p></dd>


<dt>mtry</dt>
<dd><p>The number of variables randomly selected at each split point.
The default value is set to be one-third of the total number of features of the training data.</p></dd>


<dt>nodesizeSpl</dt>
<dd><p>Minimum observations contained in terminal nodes.
The default value is 5.</p></dd>


<dt>nodesizeAvg</dt>
<dd><p>Minimum size of terminal nodes for averaging dataset.
The default value is 5.</p></dd>


<dt>nodesizeStrictSpl</dt>
<dd><p>Minimum observations to follow strictly in terminal nodes.
The default value is 1.</p></dd>


<dt>nodesizeStrictAvg</dt>
<dd><p>The minimum size of terminal nodes for averaging data set to follow when predicting.
No splits are allowed that result in nodes with observations less than this parameter.
This parameter enforces overlap of the averaging data set with the splitting set when training.
When using honesty, splits that leave less than nodesizeStrictAvg averaging
observations in either child node will be rejected, ensuring every leaf node
also has at least nodesizeStrictAvg averaging observations. The default value is 1.</p></dd>


<dt>minSplitGain</dt>
<dd><p>Minimum loss reduction to split a node further in a tree.</p></dd>


<dt>maxDepth</dt>
<dd><p>Maximum depth of a tree. The default value is 99.</p></dd>


<dt>interactionDepth</dt>
<dd><p>All splits at or above interaction depth must be on
variables that are not weighting variables (as provided by the interactionVariables argument).</p></dd>


<dt>splitratio</dt>
<dd><p>Proportion of the training data used as the splitting dataset.
It is a ratio between 0 and 1. If the ratio is 1 (the default), then the splitting
set uses the entire data, as does the averaging set---i.e., the standard Breiman RF setup.
If the ratio is 0, then the splitting data set is empty, and the entire dataset is used
for the averaging set (This is not a good usage, however, since there will be no data available for splitting).</p></dd>


<dt>OOBhonest</dt>
<dd><p>In this version of honesty, the out-of-bag observations for each tree
are used as the honest (averaging) set. This setting also changes how predictions
are constructed. When predicting for observations that are out-of-sample
(using predict(..., aggregation = "average")), all the trees in the forest
are used to construct predictions. When predicting for an observation that was in-sample (using
predict(..., aggregation = "oob")), only the trees for which that observation
was not in the averaging set are used to construct the prediction for that observation.
aggregation="oob" (out-of-bag) ensures that the outcome value for an observation
is never used to construct predictions for a given observation even when it is in sample.
This property does not hold in standard honesty, which relies on an asymptotic
subsampling argument. By default, when OOBhonest = TRUE, the out-of-bag observations
for each tree are resamples with replacement to be used for the honest (averaging)
set. This results in a third set of observations that are left out of both
the splitting and averaging set, we call these the double out-of-bag (doubleOOB)
observations. In order to get the predictions of only the trees in which each
observation fell into this doubleOOB set, one can run predict(... , aggregation = "doubleOOB").
In order to not do this second bootstrap sample, the doubleBootstrap flag can
be set to FALSE.</p></dd>


<dt>nthread</dt>
<dd><p>Number of threads to train and predict the forest. The default
number is 0 which represents using all cores.</p></dd>


<dt>middleSplit</dt>
<dd><p>Indicator of whether the split value is takes the average of two feature
values. If FALSE, it will take a point based on a uniform distribution
between two feature values. (Default = FALSE)</p></dd>


<dt>doubleTree</dt>
<dd><p>if the number of tree is doubled as averaging and splitting
data can be exchanged to create decorrelated trees. (Default = FALSE)</p></dd>


<dt>linFeats</dt>
<dd><p>A vector containing the indices of which features to split
linearly on when using linear penalized splits (defaults to use all numerical features).</p></dd>


<dt>monotonicConstraints</dt>
<dd><p>Specifies monotonic relationships between the continuous
features and the outcome. Supplied as a vector of length p with entries in
1,0,-1 which 1 indicating an increasing monotonic relationship, -1 indicating
a decreasing monotonic relationship, and 0 indicating no constraint.
Constraints supplied for categorical variable will be ignored.</p></dd>


<dt>groups</dt>
<dd><p>A vector of factors specifying the group membership of each training observation.
these groups are used in the aggregation when doing out of bag predictions in
order to predict with only trees where the entire group was not used for aggregation.
This allows the user to specify custom subgroups which will be used to create
predictions which do not use any data from a common group to make predictions for
any observation in the group. This can be used to create general custom
resampling schemes, and provide predictions consistent with the Out-of-Group set.</p></dd>


<dt>featureWeights</dt>
<dd><p>weights used when subsampling features for nodes above or at interactionDepth.</p></dd>


<dt>deepFeatureWeights</dt>
<dd><p>weights used when subsampling features for nodes below interactionDepth.</p></dd>


<dt>observationWeights</dt>
<dd><p>Denotes the weights for each training observation
that determine how likely the observation is to be selected in each bootstrap sample.
This option is not allowed when sampling is done without replacement.</p></dd>


<dt>linear</dt>
<dd><p>Indicator that enables Ridge penalized splits and linear aggregation
functions in the leaf nodes. This is recommended for data with linear outcomes.
For implementation details, see: https://arxiv.org/abs/1906.06463. Default is FALSE.</p></dd>


<dt>scale</dt>
<dd><p>A parameter which indicates whether or not we want to scale and center
the covariates and outcome before doing the regression. This can help with
stability, so by default is TRUE.</p></dd>


<dt>hasNas</dt>
<dd><p>indicates if there is any missingness in x.</p></dd>


<dt>naDirection</dt>
<dd><p>Sets a default direction for missing values in each split
node during training. It test placing all missing values to the left and
right, then selects the direction that minimizes loss. If no missing values
exist, then a default direction is randomly selected in proportion to the
distribution of observations on the left and right. (Default = FALSE)</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A list of parameters after checking the selected parameters are valid.</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Sören Künzel, Theo Saarinen, Simon Walter, Sam Antonyan, Edward Liu, Allen Tang, Jasjeet Sekhon.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

